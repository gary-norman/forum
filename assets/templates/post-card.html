{{ define "post" }}
    {{- /*gotype: github.com/gary-norman/forum/internal/models.Post*/ -}}
    {{ $channelBasePath := "db/userdata/images/channel-images/" }}
    {{ $postBasePath := "db/userdata/images/post-images/" }}
    {{ $userBasePath := "db/userdata/images/user-images/" }}
    {{ $userID := 0 }} <!-- Default value for logged out users -->
    {{ if ne .CurrentUser nil }}
        {{ $userID = .CurrentUser.ID }}
    {{ end }}
    {{ $post := .Post }}
    {{ $instance := .Instance }}
    <div class="container-card-down">
        <div class="card">
            <div class="container-post-info">
                {{ if (ne $post.AuthorAvatar "noimage") }}
                    <span class="card-pic profile-pic" data-image-auth="{{ $userBasePath }}{{ $post.AuthorAvatar }}"></span>
                {{ else }}
                    <span class="card-pic profile-pic--empty" data-name-user="{{ $post.Author }}"></span>
                {{ end }}
                <div>
                    <small id="link-post-author-{{ $post.AuthorID }}-{{.Instance}}" data-author-id="{{ $post.AuthorID }}" class="small-bold link">{{ $post.Author }}</small>
                    <div>
          <small id="link-post-channelID-{{ $post.ChannelID }}-{{.Instance}}" class="link" data-channel-id="{{ $post.ChannelID }}">{{ $post.ChannelName }}</small>
                        <small>-</small>
                        <small>{{$post.TimeSince}}</small>
                        <!-- <small>PostID: {{$post.ID}}</small> -->
                    </div>
                </div>
                <div class="like-button">
                    <button data-tooltip-name="like" class="btn-icoonly"></button>
                </div>
            </div>
            <h4 id="link-post-post-{{ $post.ID }}-{{.Instance}}" class="link" data-post-id="{{ $post.ID }}">{{$post.Title}}</h4>
            {{ if ne $post.Images "noimage" }}
                <img src={{$postBasePath}}{{$post.Images}} class="post-image" alt="Post Image">
            {{ end }}
            <pre class="cardContent">{{$post.Content}}</pre>
            <!--  Post control buttons -->
            <div class="button-row-wrap post-controls" >
                {{$status := reactionStatus $userID $post.ID 0}}
                <button class="btn-md btn-secondary btn-icotext btn-filled btn-action {{if $status.Liked}}active{{end}}" >
                    <span class="btn-likes" data-like-ID="user-{{$post.ID}}">{{$post.Likes}}</span>
                </button>
                <button class="btn-md btn-secondary btn-icotext btn-filled btn-action {{if $status.Disliked}}active{{end}}">
                    <span class="btn-dislikes" data-dislike-ID="user-{{$post.ID}}">{{$post.Dislikes}}</span>
                </button>
                <button class="btn-md btn-secondary btn-icotext btn-filled btn-action">
                    <span class="btn-reply">{{$post.CommentsCount}}</span>
                </button>
                <button id="share-button-channel-{{$post.ChannelID}}-post-{{$post.ID}}-{{.Instance}}" popovertarget="share-container-channel-{{$post.ChannelID}}-post-{{$post.ID}}-{{.Instance}}" class="btn-md btn-secondary btn-icotext btn-filled btn-action">
                    <span class="btn-share">share</span>
                </button>
                <button class="btn-md btn-secondary btn-icotext btn-filled btn-action">
                    <span class="btn-report">report</span>
                </button>
                <!--  Share modal -->
                <div popover id="share-container-channel-{{$post.ChannelID}}-post-{{$post.ID}}-{{.Instance}}" class="scrollable-user">
                    <div class="share-container">
                        <div class="button-row">
                            <a href="/" target="_blank" class="share-logo facebook"></a>
                            <a href="/" target="_blank" class="share-logo twitter"></a>
                            <a href="/" target="_blank" class="share-logo linkedin"></a>
                            <a href="/" target="_blank" class="share-logo reddit"></a>
                            <a href="/" target="_blank" class="share-logo whatsapp"></a>
                            <a href="/" target="_blank" class="share-logo telegram"></a>
                        </div>
                        <div class="flex-space-between">
                            <label class="padded" for="copy-url-channel-{{$post.ChannelName}}-post-{{$post.ID}}-{{.Instance}}">Copy URL link</label>
                            <button class="btn-sm btn-icoonly">
                                <span class="btn-copy" aria-label="Copy URL link"></span>
                            </button>
                        </div>
              <input value="https://localhost:8989/posts/{{ $post.ID }}" readonly type="text"
                               id="copy-url-channel-{{ $post.ChannelName }}-post-{{ $post.ID }}-{{.Instance}}" name="copy-url-channel-{{ $post.ChannelName }}-post-{{ $post.ID }}"/>
                    </div>
                </div>
            </div>
            <!--  Reply / Submit Comment form -->
            <form class="form-reply" action="/store-comment" enctype="multipart/form-data" method="POST">
                <div class="cont-flex-row flex-end">
                    <div class="input-wrapper container-reply">
              <textarea id="comment-form-textarea-postcard-{{$post.ID}}-{{.Instance}}-{{.Instance}}" name="content" placeholder="Type a reply..."></textarea>
                        <label for="comment-form-textarea-postcard-{{$post.ID}}-{{.Instance}}" class="user-label">Reply</label>
                    </div>
                    <!-- Hidden input to store the postID -->
                    <input type="hidden" name="postID" value="{{$post.ID}}">
                    <input type="hidden" name="channel" value='{"channelName": "{{$post.ChannelName}}", "channelID": "{{$post.ChannelID}}"}'>
                    <button class="btn-md btn-primary btn-icotext btn-action-primary btn-invert-onoff_onoff">
                        <span class="btn-reply-comment">comment</span>
                    </button>
                </div>
            </form>
        </div> <!-- end post card -->
    </div> <!-- end container-comments wrapper -->
{{end}} <!-- end define block -->
