{{ define "right-panel--edit-name" }}
  {{ $dot := .dot }}
  {{ $instance := $dot.Instance}}
  {{ $thisUser := $dot.ThisUser }}
  {{ $currentUser := $dot.CurrentUser }}
  {{ $tracer := printf "%s > %s" .Tracer "--edit-name" }}
  {{ with $tracer }}
{{/*    {{ fprint "Trace" . }} */}}
  {{ end }}
  {{if eq $instance "channel-page"}}
  {{ else if eq $instance "user-page"}}
    <div class="cont-flex-column">
      <div class="right-panel-container-name flex-space-between">
        {{  if and (ne $currentUser nil) (eq $currentUser.Username $thisUser.Username)}}
        {{ end }} <!-- "nouser" check -->
        <h4 id="user-name-content" class="side-panel-block">{{ if and (ne $currentUser nil) (eq $currentUser.Username $thisUser.Username) }}{{ $currentUser.Username }}{{ else }}{{ $thisUser.Username }}{{ end }}</h4>
        {{ if and (ne $currentUser nil) (eq $currentUser.Username $thisUser.Username) }} <!-- owner user check -->
            <label id="user-name-label" class="padded" for="user-name-input">Edit your name</label>
            <div id="user-settings-name" class="edit-settings">
              <button id="user-edit-name" type="button" class="btn-sm btn-icoonly">
                <span class="btn-edit" role="contentinfo" aria-label="Edit profile name"></span>
              </button>
              <button id="user-submit-name" type="submit" name="bio" value="bio" class="btn-sm btn-icoonly">
                <span class="btn-success" role="contentinfo" aria-label="Submit new name"></span>
              </button>
              <button id="user-cancel-name" type="button" class="btn-sm btn-icoonly">
                <span class="btn-cancel" role="contentinfo" aria-label="Cancel editing your name"></span>
              </button>
            </div>
        {{ end }} <!-- end of owner user check -->
      </div>
      <div class="input-wrapper edit-wrapper">
        <textarea class="scroll-down" id="user-name-input" name="name" placeholder="{{$thisUser.Username}}">{{$thisUser.Username}}</textarea>
      </div>
    </div>
  {{ end }}
{{ end }}
